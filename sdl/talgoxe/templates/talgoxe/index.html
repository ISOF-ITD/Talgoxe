{% load static %}
{% load talgoxe_style %}

<meta http-equiv="Content-Type" content="text/html; charset=UTF8">
<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Droid+Serif:regular,italic,bold&subset=latin">
<link rel="stylesheet" type="text/css" href="{% static "talgoxe.css" %}">
<div id="inmatning">
<h2>Inmatning</h2>
<ul>
<li>SO&nbsp;&nbsp;: {{ lemma }}</li>
{% for d in input %}
    <li>{{ d.type.format }}: {{ d.d }}</li>
{% endfor %}
</ul>
</div>
<div id="artikel">
<h2>Artikel</h2>
<p>
<strong>{{ lemma }}</strong>
{% for moment1 in segments %}
    {% if forloop.counter0 != 0 and segments|length > 1 %}
        <span class="M1">{{ forloop.counter0 }}</span>
    {% endif %}
    {% for moment2 in moment1 %}
        {% if forloop.counter0 != 0 and moment1|length > 1 %}
            <span class="M2">{{ forloop.counter0|romanlower }}</span>
        {% endif %}
        {% for seg in moment2 %}
            {% if seg.type.abbrev == 'ref' %}
                <span class="{{ seg.type }}"><a href="{% url 'stickord' seg.text %}">{{ seg.text.format }}</a></span>
            {% else %}
                <span class="{{ seg.type }}">{{ seg.text.format }}</span>
            {% endif %}
        {% endfor %}
    {% endfor %}
{% endfor %}
</p>
<p>
{% spaceless %}
<strong>{{ lemma }}</strong>
{% with setspace as True %}
    {% for segment in new_segments %}
        {% if not segment.isrightdelim %}
        {% comment %}
        {% if setspace and not segment.isrightdelim %}
        {% endcomment %}
            <span>⁠ ⁠</span>
        {% endif %}
        {% comment %}
        {% if segment.isleftdelim %}
            [set setspace to False!]
        {% else %}
            [comment set setspace to True]
        {% endif %}
        {% endcomment %}
        {% if segment.ismoment and segment.display %}
            <span class="{{ segment.type }}">{{ segment.text.format }}</span>
        {% else %}
            {% if segment.type.abbrev == 'ref' %}
                <span class="{{ segment.type }}"><a href="{% url 'stickord' segment.text %}">{{ segment.text.format }}</a></span>
            {% else %}
                <span class="{{ segment.type }}">{{ segment.format }}</span>
            {% endif %}
        {% endif %}
    {% endfor %}
{% endwith %}
{% endspaceless %}
</p>
<a href="{% url 'print_stickord' lemma.lemma %}">PDF version</a>
</div>
</div>
<div id="ordlista">
<h2>Alla ord:</h2>
<ul>
{% for lemma in lemmata %}
    <li><a href="{% url 'stickord' lemma.lemma %}">{{ lemma.lemma }}</a></li>
{% endfor %}
</ul>
<a href="{% url 'printing' %}">Print!</a>
</div>
